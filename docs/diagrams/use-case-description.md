# Опис діаграми прецедентів системи FullMag

## 1. Актори системи

Система інтернет-магазину FullMag передбачає взаємодію з наступними акторами:

- **Гість** — неавторизований користувач системи
- **Клієнт (Користувач)** — авторизований покупець
- **Менеджер** — співробітник магазину з правами управління контентом
- **Адміністратор** — співробітник з повним доступом до системи
- **Платіжна система** — зовнішній сервіс обробки платежів (Stripe, FONDY, Monobank)
- **Email сервіс** — зовнішній сервіс відправки електронних листів

---

## 2. Можливості гостя

Як видно з діаграми, гість має наступні можливості:

### Аутентифікація
- **Реєстрація** — створення нового облікового запису в системі з введенням email, пароля та телефону
- **Авторизація** — вхід в систему за допомогою email та пароля
- **Відновлення пароля** — отримання посилання для скидання пароля на email

### Робота з каталогом товарів
- **Перегляд каталогу товарів** — перегляд списку всіх доступних товарів магазину
- **Пошук товарів** — пошук товарів за назвою, описом або артикулом
- **Фільтрація товарів** — фільтрація за категорією, ціною, атрибутами та наявністю
- **Перегляд деталей товару** — перегляд повної інформації про товар, включаючи опис, характеристики, фото та відгуки
- **Порівняння товарів** — додавання товарів до списку порівняння (до 4 товарів) та аналіз їх характеристик

### Робота з кошиком
- **Додавання в кошик** — додавання обраного товару до кошика покупок
- **Перегляд кошика** — перегляд вмісту кошика з переліком товарів та загальною сумою

---

## 3. Можливості клієнта (авторизованого користувача)

Як видно з діаграми, клієнт має наступні можливості:

### Успадковані від гостя
Клієнт успадковує всі можливості гостя (перегляд каталогу, пошук, фільтрація, порівняння, робота з кошиком).

### Управління обліковим записом
- **Вихід з системи** — завершення поточної сесії користувача
- **Перегляд профілю** — перегляд особистих даних облікового запису
- **Редагування профілю** — зміна особистих даних (ім'я, телефон, email)
- **Керування адресами** — додавання, редагування та видалення адрес доставки

### Розширена робота з кошиком
- **Зміна кількості товару в кошику** — збільшення або зменшення кількості одиниць товару
- **Видалення з кошика** — видалення окремих товарів з кошика

### Список бажань
- **Додавання до списку бажань** — збереження товару в список бажань для подальшої покупки
- **Перегляд списку бажань** — перегляд збережених товарів з можливістю переміщення в кошик

### Оформлення замовлення
- **Оформлення замовлення** — створення замовлення на основі вмісту кошика
- **Вибір способу доставки** — вибір типу доставки (Нова Пошта, кур'єр, самовивіз) та введення адреси
- **Застосування купону** — введення промокоду для отримання знижки на замовлення
- **Онлайн оплата** — оплата замовлення через платіжну систему (Stripe, FONDY, Monobank)

### Управління замовленнями
- **Перегляд замовлень** — перегляд історії всіх замовлень користувача
- **Відстеження замовлення** — перегляд поточного статусу замовлення та його місцезнаходження

### Відгуки та оцінки
- **Написання відгуку** — створення текстового відгуку про придбаний товар
- **Оцінювання товару** — виставлення рейтингу товару від 1 до 5 зірок

### Повернення товарів
- **Запит на повернення** — створення заявки на повернення товару з вказанням причини

### Підтримка
- **Чат з підтримкою** — спілкування з менеджером підтримки в реальному часі через WebSocket-чат

---

## 4. Можливості менеджера

Як видно з діаграми, менеджер має наступні можливості:

### Управління замовленнями
- **Управління замовленнями** — перегляд всіх замовлень системи з можливістю фільтрації та пошуку
- **Зміна статусу замовлення** — оновлення статусу замовлення (В обробці, Оплачено, Відправлено, Доставлено, Скасовано)

### Управління товарами
- **Встановлення знижок** — налаштування відсоткових знижок на товари з вказанням періоду дії

### Управління купонами
- **Управління купонами** — створення, редагування та деактивація промокодів (відсоткові, фіксовані, безкоштовна доставка)

### Обробка повернень
- **Обробка повернень** — розгляд заявок на повернення, зміна статусу (Схвалено, Відхилено, Отримано, Повернено кошти)

### Аналітика
- **Перегляд покинутих кошиків** — аналіз незавершених покупок з можливістю відправки нагадувань клієнтам

### Підтримка клієнтів
- **Обробка звернень підтримки** — відповіді на повідомлення клієнтів у чаті підтримки

---

## 5. Можливості адміністратора

Як видно з діаграми, адміністратор має наступні можливості:

### Успадковані від менеджера
Адміністратор успадковує всі можливості менеджера (управління замовленнями, знижками, купонами, поверненнями, підтримка).

### Управління товарами
- **Управління товарами** — повний контроль над каталогом товарів
- **Додавання товару** — створення нового товару з заповненням всіх характеристик
- **Редагування товару** — зміна інформації про існуючий товар
- **Видалення товару** — видалення товару з каталогу
- **Імпорт товарів** — масове завантаження товарів з CSV-файлу

### Управління категоріями
- **Управління категоріями** — створення, редагування та видалення категорій товарів, налаштування ієрархії

### Управління користувачами
- **Управління користувачами** — перегляд списку користувачів, зміна ролей, блокування облікових записів

### Аналітика та звіти
- **Перегляд аналітики** — доступ до дашборду з ключовими метриками (виручка, замовлення, конверсія)
- **Перегляд звітів** — генерація детальних звітів за періодами (щоденні, щотижневі, щомісячні)

### Управління контентом
- **Управління банерами** — створення, редагування та видалення промо-банерів на сайті
- **Модерація відгуків** — перегляд та видалення неприйнятних відгуків користувачів

---

## 6. Можливості платіжної системи

Як видно з діаграми, платіжна система має наступні можливості:

- **Обробка платежу** — отримання платіжних даних, проведення транзакції та повернення результату
- **Повернення коштів** — обробка запитів на повернення коштів клієнту (refund)

---

## 7. Можливості Email сервісу

Як видно з діаграми, Email сервіс має наступні можливості:

- **Відправка сповіщень** — відправка різних типів email-повідомлень користувачам
- **Підтвердження замовлення** — автоматична відправка листа з деталями замовлення після його створення
- **Нагадування про кошик** — відправка листів користувачам, які залишили товари в кошику без оформлення замовлення

---

## 8. Зв'язки між прецедентами

### Include (обов'язкове включення)
- **Оформлення замовлення** включає **Вибір способу доставки** — неможливо оформити замовлення без вибору доставки
- **Онлайн оплата** включає **Обробка платежу** — оплата завжди потребує обробки платіжною системою
- **Управління товарами** включає **Додавання товару**, **Редагування товару**, **Видалення товару**

### Extend (опціональне розширення)
- **Застосування купону** розширює **Оформлення замовлення** — клієнт може застосувати промокод, але це не обов'язково
- **Імпорт товарів** розширює **Управління товарами** — адміністратор може імпортувати товари замість ручного додавання

### Узагальнення (успадкування)
- **Клієнт** успадковує можливості **Гостя** — авторизований користувач має всі права неавторизованого
- **Адміністратор** успадковує можливості **Менеджера** — адміністратор має всі права менеджера плюс додаткові

---

## 9. Таблиця розподілу прав доступу

| Функціонал | Гість | Клієнт | Менеджер | Адміністратор |
|------------|:-----:|:------:|:--------:|:-------------:|
| Перегляд каталогу | ✅ | ✅ | ✅ | ✅ |
| Пошук та фільтрація | ✅ | ✅ | ✅ | ✅ |
| Порівняння товарів | ✅ | ✅ | ✅ | ✅ |
| Додавання в кошик | ✅ | ✅ | ✅ | ✅ |
| Реєстрація/Авторизація | ✅ | — | — | — |
| Оформлення замовлення | — | ✅ | ✅ | ✅ |
| Список бажань | — | ✅ | ✅ | ✅ |
| Написання відгуків | — | ✅ | ✅ | ✅ |
| Запит на повернення | — | ✅ | ✅ | ✅ |
| Чат з підтримкою | — | ✅ | ✅ | ✅ |
| Управління замовленнями | — | — | ✅ | ✅ |
| Встановлення знижок | — | — | ✅ | ✅ |
| Управління купонами | — | — | ✅ | ✅ |
| Обробка повернень | — | — | ✅ | ✅ |
| Перегляд покинутих кошиків | — | — | ✅ | ✅ |
| Обробка звернень підтримки | — | — | ✅ | ✅ |
| Управління товарами (CRUD) | — | — | — | ✅ |
| Імпорт товарів | — | — | — | ✅ |
| Управління категоріями | — | — | — | ✅ |
| Управління користувачами | — | — | — | ✅ |
| Перегляд аналітики/звітів | — | — | — | ✅ |
| Управління банерами | — | — | — | ✅ |
| Модерація відгуків | — | — | — | ✅ |
